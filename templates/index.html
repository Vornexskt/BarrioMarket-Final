<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barrio Market | Tu Mercado Local</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root { --primary: #6366f1; --dark: #0f172a; --glass: rgba(255, 255, 255, 0.95); }
        body { font-family: 'Outfit', sans-serif; background-color: #f8fafc; overflow-x: hidden; }
        
        /* NAVBAR GLASS */
        .navbar { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(15px); padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.05); transition: 0.3s; }
        .navbar-brand { font-weight: 800; color: #facc15 !important; letter-spacing: -1px; font-size: 1.6rem; }
        
        .btn-nav { color: white; border: 1px solid rgba(255,255,255,0.2); border-radius: 50px; padding: 8px 25px; font-size: 0.9rem; transition: all 0.3s ease; }
        .btn-nav:hover { background: white; color: var(--dark); transform: translateY(-2px); }
        
        .btn-glow { background: var(--primary); color: white; border-radius: 50px; padding: 8px 25px; border: none; box-shadow: 0 0 20px rgba(99, 102, 241, 0.5); transition: all 0.3s ease; }
        .btn-glow:hover { transform: translateY(-2px) scale(1.05); box-shadow: 0 0 30px rgba(99, 102, 241, 0.8); color: white; }

        /* HERO SECTION */
        .hero { 
            background: radial-gradient(circle at top right, #1e293b, #0f172a); 
            color: white; padding: 120px 0 100px; border-radius: 0 0 80px 80px; 
            margin-bottom: 60px; position: relative; overflow: hidden; 
        }
        .hero-title { font-size: 3.5rem; font-weight: 900; line-height: 1.1; background: linear-gradient(to right, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero-blob { position: absolute; width: 500px; height: 500px; background: var(--primary); filter: blur(150px); opacity: 0.2; border-radius: 50%; animation: float 10s infinite alternate; }
        @keyframes float { from { transform: translate(0,0); } to { transform: translate(50px, -50px); } }

        /* TARJETAS DE COMERCIO */
        .card-container { perspective: 1000px; }
        .comercio-card { 
            border: none; border-radius: 25px; overflow: hidden; background: white; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.05); text-decoration: none; color: inherit; 
            display: block; height: 100%; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        .comercio-card:hover { transform: translateY(-15px) scale(1.02); box-shadow: 0 30px 60px rgba(99, 102, 241, 0.15); }
        
        .img-wrapper { height: 200px; position: relative; overflow: hidden; }
        .card-img-top { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .comercio-card:hover .card-img-top { transform: scale(1.1); }
        
        .logo-float { 
            width: 70px; height: 70px; border-radius: 20px; border: 4px solid white; 
            position: absolute; bottom: -20px; right: 20px; background: white; 
            object-fit: cover; box-shadow: 0 10px 20px rgba(0,0,0,0.1); 
            transition: 0.3s;
        }
        .comercio-card:hover .logo-float { transform: rotate(10deg) scale(1.1); }

        .vip-badge { position: absolute; top: 15px; left: 15px; background: rgba(255,255,255,0.9); backdrop-filter: blur(5px); padding: 5px 12px; border-radius: 30px; font-weight: 800; font-size: 0.8rem; color: #b45309; box-shadow: 0 5px 15px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 5px; }

        /* FOOTER */
        footer { background: #020617; padding: 80px 0 40px; margin-top: 100px; color: #64748b; }
        .footer-link { color: #94a3b8; text-decoration: none; transition: 0.3s; display: block; margin-bottom: 12px; }
        .footer-link:hover { color: var(--primary); padding-left: 10px; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/" data-aos="fade-right"><i class="fas fa-store me-2"></i>Barrio Market</a>
            <button class="navbar-toggler border-0 filter-invert" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <i class="fas fa-bars text-white"></i>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto align-items-center gap-3">
                    {% if session.get('rol') %}
                        <li class="nav-item text-white-50 small me-2" data-aos="fade-down" data-aos-delay="100">Hola, {{ session.get('nombre_negocio', 'Usuario') }}</li>
                        {% if session.get('rol') == 'dueno' %}
                            <li class="nav-item" data-aos="fade-down" data-aos-delay="200"><a href="/mi_negocio" class="btn-glow">Mi Panel</a></li>
                        {% else %}
                            <li class="nav-item" data-aos="fade-down" data-aos-delay="200"><a href="/admin" class="btn-glow">Admin</a></li>
                        {% endif %}
                        <li class="nav-item" data-aos="fade-down" data-aos-delay="300"><a href="/logout" class="nav-link text-white small fw-bold">Salir</a></li>
                    {% else %}
                        <li class="nav-item" data-aos="fade-down" data-aos-delay="100"><a href="/login" class="btn-nav">Ingresar</a></li>
                        <li class="nav-item" data-aos="fade-down" data-aos-delay="200"><a href="/registro" class="btn-glow">Crear Cuenta</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <div class="hero d-flex align-items-center">
        <div class="hero-blob" style="top: -100px; left: -100px;"></div>
        <div class="hero-blob" style="bottom: -100px; right: -100px; animation-delay: -5s; background: #ec4899;"></div>
        
        <div class="container position-relative z-1 text-center">
            <span class="badge bg-white bg-opacity-10 border border-white border-opacity-25 rounded-pill px-4 py-2 mb-4" data-aos="zoom-in">
                üöÄ La revoluci√≥n del comercio local
            </span>
            <h1 class="hero-title mb-4" data-aos="fade-up" data-aos-delay="100">Todo lo que necesitas,<br>a la vuelta de la esquina.</h1>
            <p class="lead text-white-50 mb-5 mx-auto" style="max-width: 600px;" data-aos="fade-up" data-aos-delay="200">
                Conectamos a los mejores emprendedores del barrio con vecinos como t√∫. Sin comisiones ocultas, trato directo y tecnolog√≠a simple.
            </p>
            {% if not session.get('rol') %}
            <div data-aos="fade-up" data-aos-delay="300">
                <a href="/registro" class="btn btn-primary rounded-pill px-5 py-3 fw-bold fs-5 shadow-lg me-3 transition-scale">
                    Registrar mi Negocio
                </a>
                <a href="#catalogo" class="btn btn-outline-light rounded-pill px-5 py-3 fw-bold fs-5">
                    Ver Tiendas
                </a>
            </div>
            {% endif %}
        </div>
    </div>

    <div class="container" id="catalogo">
        
        {% if destacados %}
        <div class="d-flex align-items-center gap-3 mb-5" data-aos="fade-right">
            <div class="bg-warning text-dark rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                <i class="fas fa-crown fs-4"></i>
            </div>
            <div>
                <h3 class="fw-bold m-0 text-dark">Destacados de la semana</h3>
                <p class="text-muted m-0">Los favoritos del barrio</p>
            </div>
        </div>

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-5 mb-5">
            {% for c in destacados %}
            <div class="col" data-aos="fade-up" data-aos-delay="{{ loop.index * 100 }}">
                <a href="/comercio/{{ c.id }}" class="comercio-card">
                    <div class="img-wrapper">
                        <div class="vip-badge"><i class="fas fa-star text-warning"></i> VIP</div>
                        {% if c.logo_url %}<img src="{{ c.logo_url }}" class="card-img-top">{% else %}<div class="card-img-top bg-light d-flex align-items-center justify-content-center"><i class="fas fa-store fa-3x text-secondary opacity-25"></i></div>{% endif %}
                    </div>
                    <img src="{{ c.logo_url if c.logo_url else 'https://via.placeholder.com/60' }}" class="logo-float">
                    
                    <div class="p-4 pt-5">
                        <h4 class="fw-bold mb-1">{{ c.nombre_negocio }} 
                            {% if c.es_verificado %}<i class="fas fa-check-circle text-primary fs-6" title="Verificado"></i>{% endif %}
                        </h4>
                        <div class="d-flex align-items-center gap-2 mb-3">
                            <span class="badge bg-light text-dark border">{{ c.categoria }}</span>
                        </div>
                        <p class="text-muted small m-0"><i class="fas fa-map-pin me-2 text-danger"></i> {{ c.direccion }}</p>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="d-flex align-items-center gap-3 mb-5 mt-5" data-aos="fade-right">
            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                <i class="fas fa-store fs-4"></i>
            </div>
            <div>
                <h3 class="fw-bold m-0 text-dark">Todos los comercios</h3>
                <p class="text-muted m-0">Explora la variedad local</p>
            </div>
        </div>

        <div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4">
            {% for c in comercios %}
            <div class="col" data-aos="fade-up">
                <a href="/comercio/{{ c.id }}" class="comercio-card h-100">
                    <div class="d-flex align-items-center p-3 border-bottom">
                        {% if c.logo_url %}
                        <img src="{{ c.logo_url }}" class="rounded-circle" style="width: 50px; height: 50px; object-fit: cover;">
                        {% else %}
                        <div class="rounded-circle bg-light d-flex align-items-center justify-content-center text-muted" style="width: 50px; height: 50px;"><i class="fas fa-store"></i></div>
                        {% endif %}
                        <div class="ms-3">
                            <h6 class="fw-bold m-0">{{ c.nombre_negocio }} {% if c.es_verificado %}<i class="fas fa-check-circle text-primary small"></i>{% endif %}</h6>
                            <small class="text-muted">{{ c.categoria }}</small>
                        </div>
                    </div>
                    <div class="p-3 bg-light bg-opacity-50 h-100">
                        <small class="text-secondary"><i class="fas fa-map-marker-alt me-1"></i> {{ c.direccion }}</small>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>

    </div>

    <footer>
        <div class="container">
            <div class="row gy-5">
                <div class="col-lg-4" data-aos="fade-up">
                    <h4 class="text-white fw-bold mb-4"><i class="fas fa-store text-warning me-2"></i>Barrio Market</h4>
                    <p>La plataforma digital que empodera al comercio local. Tecnolog√≠a simple para gente real.</p>
                </div>
                <div class="col-lg-2 col-6" data-aos="fade-up" data-aos-delay="100">
                    <h6 class="text-white fw-bold mb-3">Plataforma</h6>
                    <a href="/" class="footer-link">Inicio</a>
                    <a href="/login" class="footer-link">Ingresar</a>
                    <a href="/registro" class="footer-link">Registrar Negocio</a>
                </div>
                <div class="col-lg-2 col-6" data-aos="fade-up" data-aos-delay="200">
                    <h6 class="text-white fw-bold mb-3">Legal</h6>
                    <a href="/terminos" class="footer-link"><i class="fas fa-balance-scale me-2"></i>T√©rminos y Privacidad</a>
                </div>
                <div class="col-lg-4" data-aos="fade-up" data-aos-delay="300">
                    <h6 class="text-white fw-bold mb-3">Contacto</h6>
                    <a href="https://wa.me/5493813875477?text=Hola,%20necesito%20ayuda%20con%20Barrio%20Market" target="_blank" class="btn btn-outline-light rounded-pill px-4 py-2 btn-sm mb-3">
                        <i class="fab fa-whatsapp me-2"></i> Soporte WhatsApp
                    </a>
                    <a href="mailto:juanskt0704@gmail.com" class="text-decoration-none text-muted small d-block">
                        juanskt0704@gmail.com
                    </a>
                </div>
            </div>
            <div class="border-top border-secondary border-opacity-25 mt-5 pt-4 text-center text-muted small">
                &copy; 2026 Barrio Market. Hecho con ‚ù§Ô∏è para Tucuman.
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 800,
            once: true,
            offset: 50
        });
    </script>
</body>
</html>